<!DOCTYPE html>
<html>
    <head>
        <title>Click anywhere</title>

        <meta name="viewport" content="width=device-width, initial-scale=1">

        <style>
            body{
                background-color: whitesmoke;
                color: black;
                background-size: 259% 123%;
                background-position: center center;
            }

            h1{
                text-align: center;
                font-size: 300%;
            }

            section {
        display: flex;
        width: 50%;
        height: 85vh;
        margin: auto;
        border-radius: 10px;
        align-items:center;
        justify-content:center;
      }

        </style>
    </head>
    
    <body>
        <section>
        <h1 id="userip">Click anywhere</h1>
        </section>

        <a id="godIHateLife" class="twitter-share-button"
        href="https://youtu.be/dQw4w9WgXcQ">
        Peep the X</a>

        <audio autoplay id="audio">
            <source src="https://dl.sndup.net/c5s6/funkgay.m4a">
          </audio>

        <script>
            var has_clicked = false;

            document.getElementById("godIHateLife").hidden = true;

            //wait for click
            document.querySelectorAll('*')
            .forEach(element => element.addEventListener('click', e => {
                if (has_clicked == false){
                    has_clicked = true;
                    
                    start();
                }
            }))

            //start function
            function start(){
                console.log("let's go :D")

                    document.getElementById("godIHateLife").hidden = false;

                    var theUserIP;

                    //set text
                    const url = "https://api.ipify.org/"
                    fetch(url)
                    .then( r => r.text() )
                    .then( t => document.getElementById("userip").textContent = t)
                    .then( t => document.getElementById("godIHateLife").href = "https://twitter.com/intent/tweet?text=My%20ip%20is%20" + t)



                    //start music
                    var thissound = document.getElementById("audio");
                    thissound.play();

                    document.body.style.backgroundImage = 'url("../assets/memes/fish-spinning.gif")'
            }
        </script>
    </body>
</html>